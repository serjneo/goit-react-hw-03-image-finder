(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{21:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(3),c=a.n(r),s=a(11),i=a(4),l=a(5),u=a(7),h=a(6),m=a(8),g=(a(12),a(21),a(2));var d=function(e){var t=e.webformatURL,a=e.largeImageURL,n=e.tags,o=e.setModalImgInfo;return Object(g.jsx)("li",{className:"ImageGalleryItem",children:Object(g.jsx)("img",{src:t,alt:n,onClick:function(){return o({largeImageURL:a,tags:n})},className:"ImageGalleryItem-image"})})};a(23);var f=function(e){var t=e.images,a=e.setModalImgInfo;return Object(g.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.webformatURL,n=e.largeImageURL,o=e.tags,r=e.id;return Object(g.jsx)(d,{webformatURL:t,largeImageURL:n,tags:o,setModalImgInfo:a},r)}))})};a(24);var j=function(e){var t=e.onLoadMore;return Object(g.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})},b=(a(25),document.getElementById("modal-root")),p=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleKeyPressESC=function(t){"Escape"===t.code&&e.props.onClose()},e.handleOverlayClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPressESC)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyPressESC)}},{key:"render",value:function(){return Object(r.createPortal)(Object(g.jsx)("div",{className:"Overlay",onClick:this.handleOverlayClick,children:Object(g.jsx)("div",{className:"Modal",children:this.props.children})}),b)}}]),a}(n.Component),O=(a(26),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={text:""},e.handleTextChange=function(t){e.setState({text:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.text.trim()?(e.props.onSubmit(e.state.text),e.setState({text:""})):m.c.error("Enter text")},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(g.jsx)("header",{className:"Searchbar",children:Object(g.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(g.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(g.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(g.jsx)("input",{onChange:this.handleTextChange,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(n.Component)),v=O,x=a(16),y=a.n(x),I=(a(49),function(){return Object(g.jsx)("div",{className:"Loader",children:Object(g.jsx)(y.a,{type:"Rings",color:"#00BFFF",height:150,width:150,timeout:2e3})})}),S=(a(50),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={text:"",page:1,images:[],showModal:!1,error:null,status:"idle",largeImageURL:null,tags:null},e.fetchImages=function(){var t=e.state,a=t.text,n=t.page,o="/?image_type=photo&orientation=horizontal&q=".concat(a,"&page=").concat(n,"&per_page=").concat(12,"&key=").concat("22969482-37b7f2c7deb329174334b9da4");e.setState({status:"pending"}),fetch("https://pixabay.com/api"+o).then((function(e){return e.json()})).then((function(t){var a=t.hits;a.length<1&&m.c.error("Nothing found, specify your search"),e.setState((function(e){return{images:[].concat(Object(s.a)(e.images),Object(s.a)(a)),status:"resolved",page:e.page+1}})),n>1&&e.pageScroll()})).catch((function(t){return e.setState({error:t,status:"rejected"})}))},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.setModalImgInfo=function(t){var a=t.largeImageURL,n=t.tags;e.setState({largeImageURL:a,tags:n}),e.toggleModal()},e.pageScroll=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.onSubmit=function(t){e.setState({page:1,text:t})},e.onLoadMore=function(){e.fetchImages()},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.text!==this.state.text&&(this.setState({images:[],page:1}),this.fetchImages())}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.showModal,n=e.largeImageURL,o=e.tags,r=e.status;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(v,{onSubmit:this.onSubmit}),"pending"===r&&Object(g.jsx)(I,{}),Object(g.jsx)(f,{images:t,setModalImgInfo:this.setModalImgInfo}),t.length>0&&Object(g.jsx)(j,{onLoadMore:this.onLoadMore}),a&&Object(g.jsx)(p,{onClose:this.toggleModal,children:Object(g.jsx)("img",{src:n,alt:o})})]}),Object(g.jsx)(m.a,{transition:m.b})]})}}]),a}(n.Component));a(51);c.a.render(Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsx)(S,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.ffb588ba.chunk.js.map